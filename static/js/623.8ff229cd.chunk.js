"use strict";(self.webpackChunkweb_workshop=self.webpackChunkweb_workshop||[]).push([[623],{26623:(e,s,r)=>{r.r(s),r.d(s,{default:()=>x});var i=r(65043),t=r(22019),l=r(87021),n=r(85578),o=r(91686),a=r(43428),d=r(68088),u=r(70579);const c=e=>{let{user:s,messages:r}=e;const t=(0,i.useRef)(null);return(0,i.useEffect)((()=>{var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[r]),(0,u.jsx)(d.OY,{children:r?r.map(((e,i)=>(0,u.jsx)("div",{ref:i===r.length-1?t:null,children:(0,u.jsx)(h,{user:s,message:e})},i))):(0,u.jsx)(d.mc,{style:{height:"100%"},children:(0,u.jsx)(o.A,{size:"large"})})})},h=e=>{let{user:s,message:r}=e;const i=s.uuid===r.user.uuid,t=new Date(r.created_at),l=new Date(t.getTime()-6e4*t.getTimezoneOffset());return(0,u.jsxs)("div",{style:{margin:"6px 0",display:"flex",flexDirection:"column",flexWrap:"nowrap",alignItems:i?"flex-end":"flex-start"},children:[(0,u.jsxs)("div",{style:{marginLeft:"12px",marginRight:"12px"},children:[(0,u.jsx)(d.EY,{size:"small",children:r.user.username}),(0,u.jsx)(d.EY,{size:"small",style:{marginLeft:"6px"},children:l.toLocaleString("zh-CN")})]}),(0,u.jsx)(d.Zh,{style:{minHeight:"24px",width:"fit-content",maxWidth:"80%",backgroundColor:i?"rgba(4, 190, 2, 0.25)":"rgba(255, 255, 255, 0.25)"},children:(0,u.jsx)(d.EY,{style:{wordBreak:"break-all"},children:r.content})})]})},x=e=>{let{user:s,room:r,handleClose:o}=e;const[h,x]=(0,i.useState)(""),[p,g]=(0,i.useState)(!1),{data:m,error:f}=a.F7({skip:!r,variables:{room_uuid:null===r||void 0===r?void 0:r.uuid}});(0,i.useEffect)((()=>{f&&(console.error(f),t.Ay.error("\u83b7\u53d6\u6d88\u606f\u5931\u8d25\uff01"))}),[f]);const[y]=a.rz(),j=()=>(0,u.jsx)(l.Ay,{type:"link",style:{width:"40px",height:"40px",fontSize:"12px",position:"absolute",right:0,top:0},className:"need-interaction",onClick:o,children:"\u274c"});return s&&r?(0,u.jsxs)(d.Zp,{style:{width:"300px",height:"500px"},children:[(0,u.jsx)(j,{}),(0,u.jsxs)(d.mc,{style:{margin:"6px"},children:[(0,u.jsx)(d.EY,{children:(0,u.jsx)("strong",{children:r.name})}),(0,u.jsx)(d.EY,{size:"small",style:{marginTop:"6px",marginBottom:"6px"},children:r.intro})]}),(0,u.jsx)(c,{user:s,messages:null===m||void 0===m?void 0:m.message}),(0,u.jsxs)("div",{className:"need-interaction",style:{marginTop:"12px",display:"flex",width:"100%"},children:[(0,u.jsx)(n.A,{placeholder:"\u8f93\u5165\u6d88\u606f",value:h,onChange:e=>x(e.target.value),style:{fontSize:"18px",height:"40px"}}),(0,u.jsx)(l.Ay,{style:{height:"40px",fontSize:"18px",marginLeft:"12px"},onClick:async()=>{if(g(!0),!h)return t.Ay.error("\u6d88\u606f\u4e0d\u80fd\u4e3a\u7a7a\uff01"),g(!1);const e=await y({variables:{user_uuid:null===s||void 0===s?void 0:s.uuid,room_uuid:null===r||void 0===r?void 0:r.uuid,content:h}});e.errors&&(console.error(e.errors),t.Ay.error("\u53d1\u9001\u6d88\u606f\u5931\u8d25\uff01")),x(""),g(!1)},type:"primary",loading:p,children:(0,u.jsx)("strong",{children:"\u53d1\u9001"})})]})]}):null}}}]);
//# sourceMappingURL=623.8ff229cd.chunk.js.map